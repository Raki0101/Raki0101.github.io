<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>bigDecimal</title>
      <link href="/2020/02/25/ComputerScience/bigDecimal/"/>
      <url>/2020/02/25/ComputerScience/bigDecimal/</url>
      
        <content type="html"><![CDATA[<h2 id="精确位数"><a href="#精确位数" class="headerlink" title="精确位数"></a>精确位数</h2><pre><code>ROUND_DOWN    //向下取整，零方向舍入ROUND_UP       //向上取整，远离0的方向舍入ROUND_HALF_UP  //四舍五入，向（距离）最近的一边舍入，除非两边（的距离）是相等,如果是这样，向上舍入,1.55保留一位小数结果为1.6ROUND_CEILING  //向正无穷方向舍入ROUND_FLOOR    //向负无穷方向舍入    ROUND_HALF_DOWN //向（距离）最近的一边舍入，除非两边（的距离）是相等,如果是这样，向下舍入,例如1.55保留一位小数结果为1.5ROUND_HALF_EVEN              //向（距离）最近的一边舍入，除非两边（的距离）是相等,如果是这样，如果保留位数是奇数，使用ROUND_HALF_UP，如果是偶数，使用ROUND_HALF_DOWNROUND_UNNECESSARY    //计算结果是精确的，不需要舍入模式</code></pre><pre><code> public static void main(String[] args)    {        BigDecimal a = new BigDecimal(&quot;4.5635&quot;);        a = a.setScale(3, RoundingMode.HALF_UP);    //保留3位小数，且四舍五入        System.out.println(a);    }</code></pre><h2 id="转型"><a href="#转型" class="headerlink" title="转型"></a>转型</h2><pre><code>public BigDecimal(int val)　　将int表示形式转换成BigDecimalpublic BigDecimal(String val)　　将String表示形式转换成BigDecimal</code></pre><p>注：double类型最好不要硬转</p><pre><code>BigDecimal double1 = BigDecimal.valueOf(2.3); //用valueOf转BigDecimal double2 = new BigDecimal(Double.toString(2.3));//先转str后转BigDecimal</code></pre><h2 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h2><pre><code>add (BigDecimal value);                        //加法subtract (BigDecimal value);                   //减法 multiply (BigDecimal value);                   //乘法divide (BigDecimal value);                     //除法divide (BigDecimal divisor, int scale, int roundingMode)  //除法的参数,可设置小数位数和舍入方式setScale (int scale, int roundingMode)            //设置小数位数，舍入方式</code></pre>]]></content>
      
      
      <categories>
          
          <category> 字典 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 查阅 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MybatiseCURD</title>
      <link href="/2020/02/25/ComputerScience/MybatiseCURD/"/>
      <url>/2020/02/25/ComputerScience/MybatiseCURD/</url>
      
        <content type="html"><![CDATA[<h1 id="Mybatise"><a href="#Mybatise" class="headerlink" title="Mybatise"></a>Mybatise</h1><p>申明：转载博客–来自 <a href="https://blog.csdn.net/biandous/article/details/65630783" target="_blank" rel="noopener">https://blog.csdn.net/biandous/article/details/65630783</a></p><h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><p>① selectByPrimaryKey()</p><pre class=" language-java"><code class="language-java">User user <span class="token operator">=</span> XxxMapper<span class="token punctuation">.</span><span class="token function">selectByPrimaryKey</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//相当于select * from user where id = 1001</span></code></pre><p>② selectByExample() 和 selectByExampleWithBLOGs()</p><pre class=" language-java"><code class="language-java">UserExample example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>criteria<span class="token punctuation">.</span><span class="token function">andUsernameEqualTo</span><span class="token punctuation">(</span><span class="token string">"wyw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>criteria<span class="token punctuation">.</span><span class="token function">andUsernameIsNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>example<span class="token punctuation">.</span><span class="token function">setOrderByClause</span><span class="token punctuation">(</span><span class="token string">"username asc,email desc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>List<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span>list <span class="token operator">=</span> XxxMapper<span class="token punctuation">.</span><span class="token function">selectByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//相当于：select * from user where username = 'wyw' and  username is null order by username asc,email desc</span></code></pre><h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><p>①insert()</p><pre class=" language-java"><code class="language-java">User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"dsfgsdfgdsfgds"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span>user<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">"wyw@163.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>XxxMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//相当于：insert into user(ID,username,password,email) values ('dsfgsdfgdsfgds','admin','admin','wyw@126.com');</span></code></pre><h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><p>①updateByPrimaryKey() </p><pre class=" language-java"><code class="language-java">User user <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"dsfgsdfgdsfgds"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"wyw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"wyw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">"wyw@163.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>XxxMapper<span class="token punctuation">.</span><span class="token function">updateByPrimaryKey</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//相当于：update user set username='wyw', password='wyw', email='wyw@163.com' where id='dsfgsdfgdsfgds'1234567</span></code></pre><p>②updateByPrimaryKeySelective()</p><pre class=" language-java"><code class="language-java">User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"dsfgsdfgdsfgds"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"wyw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>XxxMapper<span class="token punctuation">.</span><span class="token function">updateByPrimaryKey</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//相当于：update user set password='wyw' where id='dsfgsdfgdsfgds'</span></code></pre><p>③ updateByExample() 和 updateByExampleSelective()</p><pre class=" language-java"><code class="language-java">UserExample example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>criteria<span class="token punctuation">.</span><span class="token function">andUsernameEqualTo</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>User user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"wyw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>XxxMapper<span class="token punctuation">.</span><span class="token function">updateByPrimaryKeySelective</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//相当于：update user set password='wyw' where username='admin'1234567</span></code></pre><p>updateByExample()更新所有的字段，包括字段为null的也更新，建议使用 updateByExampleSelective()更新想更新的字段</p><h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><p>①deleteByPrimaryKey()</p><pre class=" language-java"><code class="language-java">XxxMapper<span class="token punctuation">.</span><span class="token function">deleteByPrimaryKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//相当于：delete from user where id=11</span></code></pre><p>②deleteByExample()</p><pre class=" language-java"><code class="language-java">UserExample example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>criteria<span class="token punctuation">.</span><span class="token function">andUsernameEqualTo</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>XxxMapper<span class="token punctuation">.</span><span class="token function">deleteByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//相当于：delete from user where username='admin'12345</span></code></pre><h2 id="查询数据数量"><a href="#查询数据数量" class="headerlink" title="查询数据数量"></a>查询数据数量</h2><p>①countByExample()</p><pre class=" language-java"><code class="language-java">UserExample example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>criteria<span class="token punctuation">.</span><span class="token function">andUsernameEqualTo</span><span class="token punctuation">(</span><span class="token string">"wyw"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> count <span class="token operator">=</span> XxxMapper<span class="token punctuation">.</span><span class="token function">countByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//相当于：select count(*) from user where username='wyw'</span></code></pre><h2 id="Mapper中定义的方法"><a href="#Mapper中定义的方法" class="headerlink" title="Mapper中定义的方法"></a>Mapper中定义的方法</h2><img src="/1.jpg"><h2 id="Example-实例方法"><a href="#Example-实例方法" class="headerlink" title="Example 实例方法"></a>Example 实例方法</h2><img src="/2.jpg"><p>————————————————<br>版权声明：本文为CSDN博主「biandous」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/biandous/article/details/65630783" target="_blank" rel="noopener">https://blog.csdn.net/biandous/article/details/65630783</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 查阅 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot</title>
      <link href="/2020/02/24/Springboot/"/>
      <url>/2020/02/24/Springboot/</url>
      
        <content type="html"><![CDATA[<h1 id="ERP"><a href="#ERP" class="headerlink" title="ERP"></a>ERP</h1><h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>现金<br>融资获得现金，投资付出现金结束取回现金，支付融资利息。</p><pre class=" language-flow"><code class="language-flow">st=>start: 现金op1=>operation: 加工cond=>condition: 营运资本?sub1=>subroutine: 原料sub2=>subroutine: 厂房\生产线\研发\开发sub3=>subroutine: 成品op2=>operation: 广告选单sub4=>subroutine: 销售变现并还钱st->condcond(yes)->sub1cond(no)->sub2sub1->op1op1->sub3sub3->op2op2->sub4sub4->cond</code></pre><h3 id="财务报表"><a href="#财务报表" class="headerlink" title="财务报表"></a>财务报表</h3><p>会计科目 会计凭证 报表（利润表和资产负债表）</p><pre><code>会计凭证记录一笔业务的发生，再由日记账汇总到总账，期末结转。</code></pre><h3 id="筹资"><a href="#筹资" class="headerlink" title="筹资"></a>筹资</h3><p>贷款类型 长期贷款 短期贷款 高利贷</p><h3 id="长期投资"><a href="#长期投资" class="headerlink" title="长期投资"></a>长期投资</h3><h3 id="物料管理"><a href="#物料管理" class="headerlink" title="物料管理"></a>物料管理</h3><p>原料管理 存货管理</p><h3 id="厂房"><a href="#厂房" class="headerlink" title="厂房"></a>厂房</h3><p>厂房类型 厂房情况</p><h3 id="生产线"><a href="#生产线" class="headerlink" title="生产线"></a>生产线</h3><p>生产线种类 生产线情况 生产情况</p><h3 id="市场销售"><a href="#市场销售" class="headerlink" title="市场销售"></a>市场销售</h3><p>订单管理</p><h3 id="贷款"><a href="#贷款" class="headerlink" title="贷款"></a>贷款</h3><p>entity必有Id CreateTime CreateUser EditTime EditUser</p><p>另外：group_id:1000</p><p>team_count： yang</p><h2 id="贷款-长期贷款为例"><a href="#贷款-长期贷款为例" class="headerlink" title="贷款-长期贷款为例"></a>贷款-长期贷款为例</h2><h3 id="长期贷款显示"><a href="#长期贷款显示" class="headerlink" title="长期贷款显示"></a>长期贷款显示</h3><pre class=" language-javascript"><code class="language-javascript">$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        type<span class="token punctuation">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>        dataType<span class="token punctuation">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span> <span class="token punctuation">{</span>pageSize<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> pageNum<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        url<span class="token punctuation">:</span> <span class="token string">"/LongTermLoans/listbyuserandperiod"</span><span class="token punctuation">,</span>        contentType<span class="token punctuation">:</span> <span class="token string">"application/json;charset=utf-8;"</span><span class="token punctuation">,</span>success<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    data <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>n<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">6</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>returnTime <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//i 计算长期贷款显示的位置</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#ceo-cz-c"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>moneyTotal<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//val()设定文本框的值 </span>         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><ol><li><p>i 计算长期贷款显示的位置</p></li><li><p>val()设定文本框的值为 data第一条数据中moneyTotal的值<br>不是很清楚<strong><em>n</em></strong>的用途</p><h3 id="用户点击事件确认长贷"><a href="#用户点击事件确认长贷" class="headerlink" title="用户点击事件确认长贷"></a>用户点击事件确认长贷</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#pop-ok"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code></pre></li></ol><pre><code> var LongTermLoans = {        moneyTotal:$(&#39;#load-c&#39;).val(),        period: $(&#39;#currentAp&#39;).val()    };  $.ajax({        type: &quot;post&quot;,        dataType: &quot;json&quot;,        url: &quot;/LongTermLoans/add&quot;,        contentType: &quot;application/json;charset=utf-8;&quot;,        data: JSON.stringify(LongTermLoans),        success: function (data) {            alert(&quot;长期贷款成功&quot;);        $(&#39;#cash&#39;).text(parseInt($(&#39;#load-c&#39;).val()) + parseInt($(&#39;#cash&#39;).text()));//财务显示更新        }    })    $(&quot;#ceo-cz-c1&quot;).val($(&#39;#load-c&#39;).val());//覆盖原来的值为（input文本框 id=load-c）的值});</code></pre><pre><code>cash显示在财务部的现金值为 （input文本框 id=load-c）的值 加上 原来的值覆盖原来的值为（input文本框 id=load-c）的值后端长贷数据按TeamCount显示到前端```java//LongTermLoansController:@RequestMapping(&quot;listbyuserandperiod&quot;)public String getByUserIdAndPeriod() {    //获得当前用户period 和 userteam    String userTeam = Jurisdiction.getUserTeam();    int period = Integer.parseInt(Jurisdiction.getUserTeamintPeriod());    return success(LongTermLoansService.getByUserTeamIdAndPeriod(userTeam));}//LongTermLoansService:List&lt;LongTermLoans&gt; getByUserTeamIdAndPeriod(String userTeam);// LongTermLoansServiceImpl: @Override    public List&lt;LongTermLoans&gt; getByUserTeamIdAndPeriod(String userTeam ) {        Example example = new Example(LongTermLoans.class);        Example.Criteria criteria = example.createCriteria();        criteria.andEqualTo(&quot;teamCount&quot;, userTeam);        return LongTermLoansMapper.selectByExample(example);</code></pre><p>总结起来就是，选出存储在数据库里与当前userTeam相同的数据。</p><h3 id="长贷的add方法"><a href="#长贷的add方法" class="headerlink" title="长贷的add方法"></a>长贷的add方法</h3><p>每一次add 都将插入一组数据，同时以判断”teamCount””period”来删除相同区间内的一笔业务</p><p>并生成凭证。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>LongTermLoans LongTermLoans<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//全局变量 写入当前公司或小组ID</span>    String userTeam <span class="token operator">=</span> Jurisdiction<span class="token punctuation">.</span><span class="token function">getUserTeam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//获取当前userTeam</span>    <span class="token comment" spellcheck="true">//补充相关字段的取值</span>    LongTermLoans<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>userTeam<span class="token punctuation">)</span><span class="token punctuation">;</span>    LongTermLoans<span class="token punctuation">.</span><span class="token function">setGroupId</span><span class="token punctuation">(</span><span class="token string">"1000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    LongTermLoans<span class="token punctuation">.</span><span class="token function">setReturnTime</span><span class="token punctuation">(</span>LongTermLoans<span class="token punctuation">.</span><span class="token function">getPeriod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//删除当前长贷记录</span>    Example example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>LongTermLoans<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Example<span class="token punctuation">.</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"teamCount"</span><span class="token punctuation">,</span> LongTermLoans<span class="token punctuation">.</span><span class="token function">getTeamCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"period"</span><span class="token punctuation">,</span> LongTermLoans<span class="token punctuation">.</span><span class="token function">getPeriod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//select * from LongTermLoans where "teamCount"  = LongTermLoans.getTeamCount() and  period= LongTermLoans.getPeriod()</span>    List<span class="token operator">&lt;</span>LongTermLoans<span class="token operator">></span> oldRow <span class="token operator">=</span> LongTermLoansMapper<span class="token punctuation">.</span><span class="token function">selectByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>oldRow<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            LongTermLoansMapper<span class="token punctuation">.</span><span class="token function">deleteByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//提交新增记录，自动生成GUID主键及新增的createuser ,createtime</span>    BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>LongTermLoans<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//自动插入createuser ,createtime edituser edittime</span>    LongTermLoansMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>LongTermLoans<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//自动生成长贷会计凭证</span>    accountingVoucherService<span class="token punctuation">.</span><span class="token function">voucherMaker</span><span class="token punctuation">(</span>userTeam<span class="token punctuation">,</span>LongTermLoans<span class="token punctuation">.</span><span class="token function">getPeriod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>LongTermLoans<span class="token punctuation">.</span><span class="token function">getMoneyTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"CHANGDAI"</span><span class="token punctuation">,</span><span class="token string">"新增长贷"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h2 id="会计凭证"><a href="#会计凭证" class="headerlink" title="会计凭证"></a>会计凭证</h2><p>长贷调用方法。</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//自动生成长贷会计凭证</span>    accountingVoucherService<span class="token punctuation">.</span><span class="token function">voucherMaker</span><span class="token punctuation">(</span>userTeam<span class="token punctuation">,</span>LongTermLoans<span class="token punctuation">.</span><span class="token function">getPeriod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>LongTermLoans<span class="token punctuation">.</span><span class="token function">getMoneyTotal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"CHANGDAI"</span><span class="token punctuation">,</span><span class="token string">"新增长贷"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>自动记账-调用插入借贷</p><pre class=" language-java"><code class="language-java"> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">voucherMaker</span><span class="token punctuation">(</span>String teamCount<span class="token punctuation">,</span> <span class="token keyword">int</span> period <span class="token punctuation">,</span> BigDecimal amount<span class="token punctuation">,</span> String voucherType<span class="token punctuation">,</span>String content<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Example example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>AccountingVoucher<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Example<span class="token punctuation">.</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>voucherType<span class="token punctuation">)</span>        <span class="token punctuation">{</span>           <span class="token keyword">case</span> <span class="token string">"CHANGDAI"</span><span class="token operator">:</span>  <span class="token comment" spellcheck="true">//长贷的自动会计分录</span>               <span class="token function">voucherMakerBase</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">,</span>period<span class="token punctuation">,</span><span class="token string">"现金"</span><span class="token punctuation">,</span><span class="token string">"长期负债"</span><span class="token punctuation">,</span>amount<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">break</span><span class="token punctuation">;</span>           <span class="token keyword">case</span> <span class="token string">"DUANDAI"</span><span class="token operator">:</span>  <span class="token comment" spellcheck="true">//短贷的会计分录</span>               <span class="token function">voucherMakerBase</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">,</span>period<span class="token punctuation">,</span><span class="token string">"现金"</span><span class="token punctuation">,</span><span class="token string">"短期负债"</span><span class="token punctuation">,</span>amount<span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">break</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>插入借贷</p><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span>  <span class="token keyword">void</span>  <span class="token function">voucherMakerBase</span><span class="token punctuation">(</span>String teamCount<span class="token punctuation">,</span> <span class="token keyword">int</span> period <span class="token punctuation">,</span>String debtAcount<span class="token punctuation">,</span>String CreditAcount<span class="token punctuation">,</span> BigDecimal amount<span class="token punctuation">,</span>String content<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//删除已有分录按(teamCount period substract)</span>    Example example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>AccountingVoucher<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Example<span class="token punctuation">.</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"teamCount"</span><span class="token punctuation">,</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>    criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"period"</span><span class="token punctuation">,</span> period<span class="token punctuation">)</span><span class="token punctuation">;</span>    criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"substract"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>    List<span class="token operator">&lt;</span>AccountingVoucher<span class="token operator">></span> oldRow1 <span class="token operator">=</span> AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">selectByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>oldRow1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">deleteByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//插入会计分录-借方</span>    AccountingVoucher vd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vd1<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>    vd1<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>    vd1<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>    vd1<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span>debtAcount<span class="token punctuation">)</span><span class="token punctuation">;</span>    vd1<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span>debtAcount<span class="token punctuation">)</span><span class="token punctuation">;</span>    vd1<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>    BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd1<span class="token punctuation">)</span><span class="token punctuation">;</span>    AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd1<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">//插入会计分录-贷方</span>    AccountingVoucher vc1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    vc1<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>    vc1<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>    vc1<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>    vc1<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span>CreditAcount<span class="token punctuation">)</span><span class="token punctuation">;</span>    vc1<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span>CreditAcount<span class="token punctuation">)</span><span class="token punctuation">;</span>    vc1<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>    BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vc1<span class="token punctuation">)</span><span class="token punctuation">;</span>    AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vc1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="利润表"><a href="#利润表" class="headerlink" title="利润表"></a>利润表</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transferProfitAndLoss</span><span class="token punctuation">(</span>String teamCount<span class="token punctuation">,</span> <span class="token keyword">int</span> period<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//</span>    List<span class="token operator">&lt;</span>AccountBalance<span class="token operator">></span>  mylist <span class="token operator">=</span> accountBalanceService<span class="token punctuation">.</span><span class="token function">getByTeamcountAndPeriod</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">,</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">;</span>i<span class="token operator">&lt;</span>mylist<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        String myCode <span class="token operator">=</span> mylist<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAcode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        BigDecimal myMoneyC <span class="token operator">=</span>  mylist<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMoneyC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//贷方金额</span>        BigDecimal myMoneyD <span class="token operator">=</span>  mylist<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMoneyD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//借方金额</span>        String content <span class="token operator">=</span><span class="token string">"期间损益结转"</span><span class="token punctuation">;</span>        BigDecimal  netMoney <span class="token operator">=</span> BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        BigDecimal  taxMoney <span class="token operator">=</span> BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//销售收入 其他收入 直接成本 综合费用 其他支出 折旧</span>        <span class="token keyword">switch</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">case</span> <span class="token string">"销售收入"</span><span class="token operator">:</span>                AccountingVoucher vd4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                vd4<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd4<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd4<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd4<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd4<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd4<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>myMoneyC<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd4<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd4<span class="token punctuation">)</span><span class="token punctuation">;</span>                AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd4<span class="token punctuation">)</span><span class="token punctuation">;</span>                netMoney<span class="token operator">=</span> netMoney<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMoneyC<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">"其它收入"</span><span class="token operator">:</span>                AccountingVoucher vd5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                vd5<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd5<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd5<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd5<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd5<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd5<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>myMoneyC<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd5<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd5<span class="token punctuation">)</span><span class="token punctuation">;</span>                AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd5<span class="token punctuation">)</span><span class="token punctuation">;</span>                netMoney<span class="token operator">=</span> netMoney<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myMoneyC<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">"直接成本"</span><span class="token operator">:</span>            AccountingVoucher vd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>myMoneyD<span class="token punctuation">)</span><span class="token punctuation">;</span>            BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd1<span class="token punctuation">)</span><span class="token punctuation">;</span>            AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd1<span class="token punctuation">)</span><span class="token punctuation">;</span>                netMoney<span class="token operator">=</span> netMoney<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>myMoneyD<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">"综合费用"</span><span class="token operator">:</span>                AccountingVoucher vd2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                vd2<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd2<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd2<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd2<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd2<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd2<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                vd2<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>myMoneyD<span class="token punctuation">)</span><span class="token punctuation">;</span>                BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd2<span class="token punctuation">)</span><span class="token punctuation">;</span>                AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd2<span class="token punctuation">)</span><span class="token punctuation">;</span>                netMoney<span class="token operator">=</span> netMoney<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>myMoneyD<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">"其它支出"</span><span class="token operator">:</span>                AccountingVoucher vd3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                vd3<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd3<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd3<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd3<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd3<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span>myCode<span class="token punctuation">)</span><span class="token punctuation">;</span>                vd3<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                vd3<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>myMoneyD<span class="token punctuation">)</span><span class="token punctuation">;</span>                BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd3<span class="token punctuation">)</span><span class="token punctuation">;</span>                AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd3<span class="token punctuation">)</span><span class="token punctuation">;</span>                netMoney<span class="token operator">=</span> netMoney<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>myMoneyD<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token string">"折旧"</span><span class="token operator">:</span>                netMoney<span class="token operator">=</span> netMoney<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>myMoneyC<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//计算利润的时候要扣减一个折旧科目的贷方发生额。</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>netMoney<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//当毛利大于零的时候</span>        <span class="token punctuation">{</span>            taxMoney <span class="token operator">=</span>  netMoney<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>BigDecimal<span class="token punctuation">.</span>ROUND_DOWN<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//所得税0.25,向下取整。这个BIGDECIMAL的语法真的是够烦的！</span>            netMoney <span class="token operator">=</span> netMoney<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>taxMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>            AccountingVoucher vd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span><span class="token string">"应交税金"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span><span class="token string">"应交税金"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>taxMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>            BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd1<span class="token punctuation">)</span><span class="token punctuation">;</span>            AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd1<span class="token punctuation">)</span><span class="token punctuation">;</span>            AccountingVoucher vd2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span><span class="token string">"年度净利"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span><span class="token string">"年度净利"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>netMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>            BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd2<span class="token punctuation">)</span><span class="token punctuation">;</span>            AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>netMoney<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//当毛利小于零的时候，</span>        <span class="token punctuation">{</span>            AccountingVoucher vd2<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span><span class="token string">"年度净利"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span><span class="token string">"年度净利"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd2<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>netMoney<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//毛利为负，计借方，取计算金额的绝对值</span>            vd2<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd2<span class="token punctuation">)</span><span class="token punctuation">;</span>            AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="计算现金"><a href="#计算现金" class="headerlink" title="计算现金"></a>计算现金</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> BigDecimal <span class="token function">sumMoney</span><span class="token punctuation">(</span>String userTeam <span class="token punctuation">,</span><span class="token keyword">int</span> period<span class="token punctuation">,</span>String acode<span class="token punctuation">,</span>String aType<span class="token punctuation">)</span> <span class="token punctuation">{</span>    BigDecimal myMoney <span class="token operator">=</span> BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    BigDecimal  addMoney <span class="token operator">=</span> BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Example example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>AccountingVoucher<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Example<span class="token punctuation">.</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"teamCount"</span><span class="token punctuation">,</span> userTeam<span class="token punctuation">)</span><span class="token punctuation">;</span>    criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"acode"</span><span class="token punctuation">,</span> acode<span class="token punctuation">)</span><span class="token punctuation">;</span>    criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"period"</span><span class="token punctuation">,</span> period<span class="token punctuation">)</span><span class="token punctuation">;</span>    List<span class="token operator">&lt;</span>AccountingVoucher<span class="token operator">></span> oldRow <span class="token operator">=</span> AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">selectByExample</span><span class="token punctuation">(</span> example<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>oldRow<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"借"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>aType<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> null <span class="token operator">!=</span>oldRow<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMoneyD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            addMoney <span class="token operator">=</span> oldRow<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMoneyD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"贷"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>aType<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> null <span class="token operator">!=</span>oldRow<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMoneyC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            addMoney <span class="token operator">=</span> oldRow<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMoneyC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        myMoney <span class="token operator">=</span> myMoney<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>addMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> myMoney<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>短期贷款显示与长贷类似</p><pre class=" language-javascript"><code class="language-javascript">success<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>            data <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>n<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> currentAp <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#currentAp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> currentAp <span class="token operator">*</span> <span class="token number">1</span> <span class="token operator">-</span> value<span class="token punctuation">.</span>period<span class="token punctuation">;</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#ceo-cz-d"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>moneyTotal<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="方法汇总"><a href="#方法汇总" class="headerlink" title="方法汇总"></a>方法汇总</h2><h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><pre class=" language-java"><code class="language-java">AccountingVoucher vd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingVoucher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setTeamCount</span><span class="token punctuation">(</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setPeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setSubstract</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setAcode</span><span class="token punctuation">(</span><span class="token string">"应交税金"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setAname</span><span class="token punctuation">(</span><span class="token string">"应交税金"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setMoneyD</span><span class="token punctuation">(</span>BigDecimal<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            vd1<span class="token punctuation">.</span><span class="token function">setMoneyC</span><span class="token punctuation">(</span>taxMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>            BaseBeanHelper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd1<span class="token punctuation">)</span><span class="token punctuation">;</span>            AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>vd1<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//删除已有分录按(teamCount period substract)</span>Example example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>AccountingVoucher<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Example<span class="token punctuation">.</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"teamCount"</span><span class="token punctuation">,</span>teamCount<span class="token punctuation">)</span><span class="token punctuation">;</span>criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"period"</span><span class="token punctuation">,</span> period<span class="token punctuation">)</span><span class="token punctuation">;</span>criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"substract"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>List<span class="token operator">&lt;</span>AccountingVoucher<span class="token operator">></span> oldRow1 <span class="token operator">=</span> AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">selectByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>oldRow1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    AccountingVoucherMapper<span class="token punctuation">.</span><span class="token function">deleteByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Project Evaluation</title>
      <link href="/2020/02/24/Finance/ProjectEvaluation/"/>
      <url>/2020/02/24/Finance/ProjectEvaluation/</url>
      
        <content type="html"><![CDATA[<h1 id="Project-Evaluation–收益"><a href="#Project-Evaluation–收益" class="headerlink" title="Project Evaluation–收益"></a>Project Evaluation–收益</h1><h2 id="NPV"><a href="#NPV" class="headerlink" title="NPV"></a>NPV</h2><p>NPV====Relevant Cash flow。</p><blockquote><p>  <strong>Relevant</strong> cash flow means that any cash flow will not inflow or outflow without decision.</p></blockquote><blockquote><p>Net present value 涉及 Revenue Cost Tax Investment Working-capital<br>即（收入成本税+两项投资）。</p></blockquote><pre><code>npv = (revenue + cost + tax + investment + workingCapital)  DiscountFactor</code></pre><img src="/2.png" alt="计算公式" style="weighth:100% height:100%"><h3 id="Revenue"><a href="#Revenue" class="headerlink" title="Revenue"></a>Revenue</h3><h3 id="Cost"><a href="#Cost" class="headerlink" title="Cost"></a>Cost</h3><p>Fixed cost+ Variable cost+ Other cost</p><h3 id="Tax"><a href="#Tax" class="headerlink" title="Tax"></a>Tax</h3><p>在评估过程中影响tax的因素主要有两个：</p><pre><code>1. Taxed allowanced depreciation2. Loss carry forward </code></pre><h3 id="Investment"><a href="#Investment" class="headerlink" title="Investment"></a>Investment</h3><p>Investment in Non-current assets</p><h3 id="workingCapital"><a href="#workingCapital" class="headerlink" title="workingCapital"></a>workingCapital</h3><p>workingCapital for year and year</p><h2 id="IRR"><a href="#IRR" class="headerlink" title="IRR"></a>IRR</h2><p>不切实际的IRR</p><h2 id="MIRR"><a href="#MIRR" class="headerlink" title="MIRR"></a>MIRR</h2>]]></content>
      
      
      <categories>
          
          <category> Finance </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FM </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
